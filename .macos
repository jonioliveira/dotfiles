# Close any open System Preferences panes, to prevent them from overriding
# settings weâ€™re about to change
osascript -e 'tell application "System Preferences" to quit'

# Ask for the administrator password upfront
sudo -v

# Disable the sound effects on boot
sudo nvram SystemAudioVolume=" "

# Reveal IP address, hostname, OS version, etc. when clicking the clock
# in the login window
sudo defaults write /Library/Preferences/com.apple.loginwindow AdminHostInfo HostName

# Avoid creating .DS_Store files on network or USB volumes
defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool true
defaults write com.apple.desktopservices DSDontWriteUSBStores -bool true

# Show battery life percentage.
defaults write com.apple.menuextra.battery ShowPercent -string "YES"

# Reveal IP address, hostname, OS version, etc. when clicking the clock
# in the login window
sudo defaults write /Library/Preferences/com.apple.loginwindow AdminHostInfo HostName

# Screen
# ======

# Require password immediately after sleep or screen saver begins
defaults write com.apple.screensaver askForPassword -int 1
defaults write com.apple.screensaver askForPasswordDelay -int 0

# Save screenshots to the downlaods.
defaults write com.apple.screencapture location "$HOME/Downloads/"

# Disable the warning before emptying the Trash
defaults write com.apple.finder WarnOnEmptyTrash -bool false

# Spotlight
# =========

# Disable Spotlight indexing for any volume that gets mounted and has not yet
# been indexed before.
# Use `sudo mdutil -i off "/Volumes/foo"` to stop indexing any volume.
#sudo defaults write /.Spotlight-V100/VolumeConfiguration Exclusions -array "/Volumes"

#defaults write com.apple.spotlight orderedItems -array \
#        '{"enabled" = 1;"name" = "APPLICATIONS";}' \
#        '{"enabled" = 1;"name" = "SYSTEM_PREFS";}' \
#        '{"enabled" = 1;"name" = "DIRECTORIES";}' \
#        '{"enabled" = 1;"name" = "PDF";}' \
#        '{"enabled" = 0;"name" = "FONTS";}' \
#        '{"enabled" = 0;"name" = "DOCUMENTS";}' \
#        '{"enabled" = 0;"name" = "MESSAGES";}' \
#        '{"enabled" = 0;"name" = "CONTACT";}' \
#        '{"enabled" = 0;"name" = "EVENT_TODO";}' \
#        '{"enabled" = 0;"name" = "IMAGES";}' \
#        '{"enabled" = 0;"name" = "BOOKMARKS";}' \
#        '{"enabled" = 0;"name" = "MUSIC";}' \
#        '{"enabled" = 0;"name" = "MOVIES";}' \
#        '{"enabled" = 0;"name" = "PRESENTATIONS";}' \
#        '{"enabled" = 0;"name" = "SPREADSHEETS";}' \
#        '{"enabled" = 0;"name" = "SOURCE";}'

# Load new settings before rebuilding the index
# killall mds > /dev/null 2>&1
# Make sure indexing is enabled for the main volume
# sudo mdutil -i on / > /dev/null
# Rebuild the index from scratch
# sudo mdutil -E / > /dev/null
